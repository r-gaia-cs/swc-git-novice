<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: Introdução ao Controle de Versão com Git</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap-responsive.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <div class="row-fluid">
        <div class="span10 offset1">
          <h1 class="title">Introdução ao Controle de Versão com Git</h1>
          <h2 class="subtitle">Colaborando</h2>
<div id="objetivos" class="objectives">
<h2>Objetivos</h2>
<ul>
<li>Explicar o que são repositórios remotos e por que eles são úteis.</li>
<li>Explicar o que acontece quando um repositório remoto é clonado.</li>
<li>Explicar o que acontece quando mudanças são obtidas e enviadas para um repositório remoto.</li>
</ul>
</div>
<p>Controle de versão começa a fazer falta quando começamos a colaborar com outras pessoas. Já temos quase todas as ferramentas necessárias para fazer isso, só falta aprendermos como copiar alterações de um repositório para outro.</p>
<p>Sistemas como Git permite trocar alterações entre dois repositórios quaisquer. Na prática, entretanto, é mais fácil utilizar uma cópia como hub central e mantê-lo em um servidor conectado à internet do que no notebook de alguém. Grande parte dos programadores utilizam serviços de hospedagem como <a href="https://github.com">GitHub</a> ou <a href="https://bitbucket.org">BitBucket</a> para armazenar esses cópias. Vamos explorar os pros e os contras dessa abordagem no final dessa lição.</p>
<p>Vamos começar por compartilhar as mudanças que fizemos no nosso projeto com o mundo. Autentique-se no GitHub e clique no ícone no canto superior direito para criar um novo repositório denominado <code>planetas</code>:</p>
<p><img src="fig/github-create-repo-01.png" alt="Criando um novo repositório no GitHub (Passo 1)" /></p>
<p>Nomeie o seu repositório de &quot;planetas&quot; e selecione &quot;Create Repository&quot;:</p>
<p><img src="fig/github-create-repo-02.png" alt="Criando um novo repositório no GitHub (Passo 2)" /></p>
<p>Assim que o repositório for criado, GitHub irá mostrar uma página com uma URL e algumas informações de como configurar seu repositório local:</p>
<p><img src="fig/github-create-repo-03.png" alt="Criando um novo repositório no GitHub (Passo 3)" /></p>
<p>Esse procedimento realiza os seguintes comandos nos servidores do GitHub:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">mkdir</span> planetas
$ <span class="kw">cd</span> planetas
$ <span class="kw">git</span> init</code></pre>
<p>Nosso repositório local ainda contem nosso trabalho anterior no arquivo <code>marte.txt</code> mas o repositório remoto no GitHub não contem nenhum arquivo:</p>
<p><img src="fig/git-freshly-made-github-repo.svg" alt="Freshly-Made GitHub Repository" /></p>
<p>O próximo passo é conectar esses dois repositórios. Fazemos isso transformando o repositório no GitHub um repositório <a href="../../gloss.html#repository-remote">remote</a> para o repositório local. Na página inicial do repositório no GitHub encontra-se a string necessária para identificá-lo:</p>
<p><img src="fig/github-find-repo-string.png" alt="Where to Find Repository URL on GitHub" /></p>
<p>Selecione 'HTTPS' para alterar o <a href="../../gloss.html#protocol">protocol</a> SSH para HTTPS.</p>
<div id="https-vs-ssh" class="callout">
<h2>HTTPS vs SSH</h2>
<p>Utilizamos HTTPS porque ele não requer configurações adicionais. Depois do workshop você pode querer configurar acesso via SSH, que é um pouco seguro, seguindo um dos tutoriais disponibilizados por <a href="https://help.github.com/articles/generating-ssh-keys">GitHub</a>, <a href="https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git">Atlassian/BitBucket</a> e <a href="https://about.gitlab.com/2014/03/04/add-ssh-key-screencast/">GitLab</a> (esse é um vídeo).</p>
</div>
<p><img src="fig/github-change-repo-string.png" alt="Changing the Repository URL on GitHub" /></p>
<p>Copie essa URL do navegador, vá para seu repositório local e execute o comando:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> remote add origin https://github.com/vlad/planetas</code></pre>
<p>Certifique-se de utilizar a URL do seu repositório ao invés da URL do Vlad: a única diferença deve ser seu nome de usuário no lugar de <code>vlad</code>.</p>
<p>Você pode verificar que o comando anterior foi executado corretamente utilizando <code>git remote -v</code>:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> remote -v</code></pre>
<pre class="output"><code>origin   https://github.com/vlad/planetas.git (push)
origin   https://github.com/vlad/planetas.git (fetch)</code></pre>
<p>O nome <code>origin</code> é o apelido local para seu repositório remoto: você pode utilizar outro apelido no lugar se você desejar, mas <code>origin</code> é a opção mais utilizada.</p>
<p>Uma vez que o apelido <code>origin</code> está configurado, o comando a seguir irá copiar as alterações no repositório local para o repositório no GitHub:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> push origin master</code></pre>
<pre class="output"><code>Counting objects: 9, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (9/9), 821 bytes, done.
Total 9 (delta 2), reused 0 (delta 0)
To https://github.com/vlad/planetas
 * [new branch]      master -&gt; master
Branch master set up to track remote branch master from origin.</code></pre>
<div id="proxy" class="callout">
<h2>Proxy</h2>
<p>Se a rede que você está conectado utiliza um proxy existe uma change do último comando ter falhado com &quot;Could not resolve hostname&quot; como mensagem de error. Para resolver esse problema você precisa informar ao Git sobre o proxy:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> config --global http.proxy http://user:password@proxy.url
$ <span class="kw">git</span> config --global https.proxy http://user:password@proxy.url</code></pre>
<p>Quando você se conectar em outra rede que não utiliza um proxy você terá que dizer para o Git desabilitar o uso do proxy utilizando</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> config --global --unset http.proxy
$ <span class="kw">git</span> config --global --unset https.proxy</code></pre>
</div>
<div id="gerenciadores-de-senhas" class="callout">
<h2>Gerenciadores de Senhas</h2>
<p>Se seu sistema operacional possui um gerenciador de senha configurad, <code>git push</code> irá tentar utilizá-lo quando for necessário informar o usuário e senha. Se você desejar digitar seu usuário e senha no terminal ao invés do gerenciador de senha, digite</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">unset</span> <span class="ot">SSH_ASKPASS</span></code></pre>
<p>Você talvez queira adicionar esse comando no final do seu <code>~/.bashrc</code> para que esse passe a ser o comportamento padrão.</p>
</div>
<p>Agora o seus repositórios locais e remotos estão no seguinte estado:</p>
<p><img src="fig/github-repo-after-first-push.svg" alt="Repositório no GitHub após o primeiro push" /></p>
<div id="a-opção--u" class="callout">
<h2>A opção '-u'</h2>
<p>Normalmente você vai encontrar a opção <code>-u</code> em outras documentações disponíveis na internet. Ela está relacionada com conceitos apresentados na nossa lição intermediária e pode ser ignorada sem problemas.</p>
</div>
<p>Você também pode pegar as alterações no seu repositório remoto para o local:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> pull origin master</code></pre>
<pre class="output"><code>From https://github.com/vlad/planetas
 * branch            master     -&gt; FETCH_HEAD
Already up-to-date.</code></pre>
<p>Nesse caso, nenhuma modificação foi recebida porque os dois repositórios já estavam sincronizados. Se alguém tivesse enviado alguma alteração para esse repositório no GitHub, o comando anterior teria baixado as modificações para o repositório local.</p>
<p>Para o próximo passo, iremos trabalhar em pares. Escolha um dos seus repositórios no GitHub para utilizá-lo colaborativamente.</p>
<div id="praticando-sozinho" class="callout">
<h2>Praticando sozinho</h2>
<p>Se você estiver seguindo essa lição sozinho, antes de continuar abra um segundo terminal, altere o diretório corrente para outro diretório (e.g. <code>/tmp</code>). Esse segundo terminal irá representar seu colega que estaria trabalhando em outro computador. Você não precisa dar permissões para ninguém pois o seu &quot;colega&quot; vai ser você mesmo.</p>
</div>
<p>O dono do repositório que será utilizado precisa dar permissões de escrita para a outra pessoa. No GitHub, selecione &quot;Settings&quot; no lado direito, depois &quot;Collaborators&quot; e depois digite o usuário da sua dupla.</p>
<p><img src="fig/github-add-collaborators.png" alt="Adding collaborators on Github" /></p>
<p>Quem <em>não</em> é dono do repositório que será utilizado deve mudar de diretório, utilizando <code>cd</code>, de tal forma que <code>ls</code> não mais mostre o diretório <code>planetas</code> e em seguida criar uma cópia do repositório que será utilizado no seu computador:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> clone https://github.com/vlad/planetas.git</code></pre>
<p>Troque <code>vlad</code> pelo usuário do seu parceiro (o dono do repositório que será utilizado).</p>
<p><code>git clone</code> irá criar uma cópia local do repositório remoto.</p>
<p><img src="fig/github-collaboration.svg" alt="After Creating Clone of Repository" /></p>
<p>Agora o novo colaborador pode fazer uma alteração na sua cópia do repositório:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">cd</span> planetas
$ <span class="kw">nano</span> plutao.txt
$ <span class="kw">cat</span> plutao.txt</code></pre>
<pre class="output"><code>Também é um planeta!</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> add plutao.txt
$ <span class="kw">git</span> commit -m <span class="st">&quot;Algumas notas sobre Plutão&quot;</span></code></pre>
<pre class="output"><code> 1 file changed, 1 insertion(+)
create mode 100644 plutao.txt</code></pre>
<p>e depois enviar as mudanças para o GitHub:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> push origin master</code></pre>
<pre class="output"><code>Counting objects: 4, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 306 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
To https://github.com/vlad/planetas.git
   9272da5..29aba7c  master -&gt; master</code></pre>
<p>Note que não precisamos criar um repositório remoto chamado <code>origin</code> pois Git faz isso automaticamente quando clonamos um repositório. (Por é o motivo que utilizamos <code>origin</code> anteriormente quando configuramos o repositório remoto manualmente).</p>
<p>Podemos baixar as mudanças agora disponíveis no GitHub no repositório original em nossa máquina:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">git</span> pull origin master</code></pre>
<pre class="output"><code>remote: Counting objects: 4, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 3 (delta 0)
Unpacking objects: 100% (3/3), done.
From https://github.com/vlad/planetas
 * branch            master     -&gt; FETCH_HEAD
Updating 9272da5..29aba7c
Fast-forward
plutão.txt | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 plutão.txt</code></pre>
<div id="marcação-de-tempo-no-github" class="challenge">
<h2>Marcação de tempo no GitHub</h2>
<p>Crie um repositório no GitHub, clone-o, adicione um arquivo, envie essa mudança para o GitHub e olhe o horário, em inglês <a href="reference.html#timestamp">timestamp</a>, que as alterações foram feitas no GitHub. Como que o GitHub grava o tempo? E por que?</p>
</div>
        </div>
      </div>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/git-novice">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="http://software-carpentry.org/v5/js/bootstrap/bootstrap.min.js"></script>
  </body>
</html>
